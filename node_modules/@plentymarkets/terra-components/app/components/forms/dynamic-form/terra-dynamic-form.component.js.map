{"version":3,"sources":["app/components/forms/dynamic-form/terra-dynamic-form.component.ts"],"names":[],"mappings":"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","file":"app/components/forms/dynamic-form/terra-dynamic-form.component.js","sourcesContent":["import {\n    Component,\n    Input,\n    OnChanges,\n    OnInit,\n    SimpleChanges\n} from '@angular/core';\nimport { isNullOrUndefined } from 'util';\nimport { TerraFormFieldControlService } from './service/terra-form-field-control.service';\nimport { TerraFormFieldBase } from './data/terra-form-field-base';\nimport { TerraDynamicFormFunctionsHandler } from './handler/terra-dynamic-form-functions.handler';\nimport { TerraDynamicFormService } from './service/terra-dynamic-form.service';\n\nexport enum TerraHtmlMethods\n{\n    GET = 'get',\n    POST = 'post',\n    PUT = 'put',\n    DELETE = 'delete'\n}\n\nexport interface TerraDynamicFormRequestParams\n{\n    route:string;\n    htmlMethod:TerraHtmlMethods;\n    params?:{};\n}\n\n/**\n * @author mfrank\n */\n@Component({\n    selector:  'terra-dynamic-form',\n    template:  require('./terra-dynamic-form.component.html'),\n    styles:    [require('./terra-dynamic-form.component.scss')],\n    providers: [TerraDynamicFormService]\n})\nexport class TerraDynamicFormComponent implements OnInit, OnChanges\n{\n    @Input()\n    public inputFormFunctions:TerraDynamicFormFunctionsHandler<any>;\n\n    @Input()\n    public inputFormFields:Array<TerraFormFieldBase<any>>;\n\n    @Input()\n    public inputPortletStyle:string;\n\n    @Input()\n    public inputRequestParams:TerraDynamicFormRequestParams;\n\n    @Input()\n    public inputHasNoSaveButton:boolean;\n\n    @Input()\n    public inputHasNoResetButton:boolean;\n\n    @Input()\n    public inputIsDisabled:boolean;\n\n    @Input()\n    public inputUsePortlet:boolean = true;\n\n    constructor(private _formFieldControlService:TerraFormFieldControlService)\n    {\n        this.inputPortletStyle = 'col-xs-12 col-md-8 col-lg-5';\n        this.inputRequestParams = {\n            route:      '',\n            htmlMethod: null,\n            params:     {}\n        };\n\n        this.inputHasNoSaveButton = false;\n        this.inputHasNoResetButton = false;\n        this.inputIsDisabled = false;\n    }\n\n    public ngOnInit():void\n    {\n        if(isNullOrUndefined(this.inputFormFields) || isNullOrUndefined(this.inputFormFunctions))\n        {\n            console.error('inputFormFields and inputFormFunctions must be set.');\n        }\n        else\n        {\n            this._formFieldControlService.createFormGroup(this.inputFormFields);\n            this.inputFormFunctions.formFieldControlService = this._formFieldControlService;\n\n            this.registerValueChange();\n        }\n    }\n\n    public ngOnChanges(changes:SimpleChanges):void\n    {\n        if(changes['inputFormFields'])\n        {\n            this._formFieldControlService.createFormGroup(this.inputFormFields);\n            this.registerValueChange();\n        }\n    }\n\n    protected validate():void\n    {\n        if(this._formFieldControlService.dynamicFormGroup.valid)\n        {\n            this.inputFormFunctions.saveCallback(this._formFieldControlService.dynamicFormGroup.value);\n        }\n        else\n        {\n            this.inputFormFunctions.errorCallback(this._formFieldControlService.dynamicFormGroup,\n                this._formFieldControlService.translationMapping);\n        }\n    }\n\n    protected onResetClick():void\n    {\n        this._formFieldControlService.resetForm();\n    }\n\n    private registerValueChange():void\n    {\n        if(!isNullOrUndefined(this.inputFormFunctions.onValueChangedCallback))\n        {\n            this._formFieldControlService\n                .dynamicFormGroup\n                .valueChanges\n                .debounceTime(1000)\n                .subscribe((value:any) =>\n                {\n                    this.inputFormFunctions.onValueChangedCallback(value);\n                });\n        }\n    }\n}\n"],"sourceRoot":"/source/"}